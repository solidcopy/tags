【概要】

オーディオファイルのタグ情報を管理するバッチ。


【構造を再考】

・ファイルフォーマットを表すFormatクラスを作成する。
    ・対応するTagReader, TagWriterを返す。

・タグそれぞれを属性として定義したTagクラスを作成する。
    ・TagFormatを保持する。

・ファイルをTagとして読み込むTagReaderクラスを作成する。
・FlacFile用のFlacTagReaderクラスを作成する。

・



【使い方】

まずCDの取り込みやダウンロードで新しいアルバムを入手したら、そのディレクトリでtagsを実行する。
これでタグファイルが作成される。

タグファイルを編集して正しい状態にする。
アートワークとして使用するJPEG画像をFolder.jpgという名前で配置する。

tagsをもう一度実行してオーディオファイルのタグを更新する。
タグファイルはそのまま残しておく。


【タグの一覧】

タグを2つに分類する。

・アルバム単位
album
albumartist
disctotal
date

・ディスク単位
tracktotal

・トラック単位
title
artist
discnumber
tracknumber


【タグファイルの形式】

再考した結果、以下のようにする。

初めにアルバム全体で共通であるタグを列挙。
次に、空行で区切りながらディスク単位でトラックを列挙する。
曲ごとのartistを設定できるようにしたい。
tracknumber, discnumber, tracktotal, disctotalは算出するのでタグファイルに記載しない。

・タグの一覧通りの順番でアルバムタグを出力する。
・ファイル名の昇順でトラックごとに次の処理をする。
    ・改行を出力する。
    ・タグの一覧通りの順番でトラックタグを出力する。


【対象ファイルフォーマット】

FLACのみ。

M4A、MP3は同じライブラリで対応できるが、やるとしても後で。

DSDはライブラリがないので厳しい。

